"use strict";let tasks=[];const taskForm=document.getElementById("task-form"),taskInput=document.getElementById("task-input"),taskList=document.getElementById("task-list");function saveTasks(){try{localStorage.setItem("tasks",JSON.stringify(tasks))}catch(t){console.error("Could not save tasks to localStorage",t)}}function loadTasks(){try{const t=localStorage.getItem("tasks");t&&(tasks=JSON.parse(t),renderTasks())}catch(t){console.error("Could not load tasks from localStorage",t),tasks=[]}}function renderTasks(){if(taskList.innerHTML="",0===tasks.length){const t=document.createElement("li");return t.textContent="No tasks yet. Add one above!",t.style.textAlign="center",t.style.color="#888",void taskList.appendChild(t)}tasks.forEach(t=>{const e=document.createElement("li");e.setAttribute("data-id",t.id.toString()),e.setAttribute("role","listitem");const s=document.createElement("span");s.textContent=t.text,s.className="task-text",s.setAttribute("tabindex","0"),t.completed&&s.classList.add("completed");const a=document.createElement("button");a.textContent="Ã—",a.className="delete-btn",a.setAttribute("aria-label",`Delete task: ${t.text}`),e.appendChild(s),e.appendChild(a),taskList.appendChild(e)})}function addTask(t){const e={id:Date.now(),text:t,completed:!1};tasks.push(e),saveTasks(),renderTasks()}function toggleTask(t){tasks=tasks.map(e=>e.id===t?{...e,completed:!e.completed}:e),saveTasks(),renderTasks()}function deleteTask(t){tasks=tasks.filter(e=>e.id!==t),saveTasks(),renderTasks()}taskForm.addEventListener("submit",t=>{t.preventDefault();const e=taskInput.value.trim();e&&(addTask(e),taskInput.value="",taskInput.focus())}),taskList.addEventListener("click",t=>{const e=t.target,s=e.closest("li");if(!s)return;const a=Number(s.dataset.id);e.classList.contains("delete-btn")?deleteTask(a):e.classList.contains("task-text")&&toggleTask(a)}),taskList.addEventListener("keydown",t=>{if("Enter"===t.key){const e=t.target;if(e.classList.contains("task-text")){const t=e.closest("li");if(!t)return;toggleTask(Number(t.dataset.id))}}}),document.addEventListener("DOMContentLoaded",loadTasks);
